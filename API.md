<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [HullClient](#hullclient)
    -   [configuration](#configuration)
    -   [as](#as)
    -   [asUser](#asuser)
    -   [asAccount](#asaccount)
-   [ScopedHullClient](#scopedhullclient)
    -   [token](#token)
    -   [traits](#traits)
    -   [track](#track)
    -   [alias](#alias)
    -   [account](#account)
-   [Api](#api)
    -   [get](#get)
    -   [post](#post)
    -   [put](#put)
    -   [del](#del)
-   [Utils](#utils)
    -   [groupTraits](#grouptraits)
    -   [properties.get](#propertiesget)
    -   [settings.update](#settingsupdate)
    -   [traits.group](#traitsgroup)

## HullClient

HullClient instance constructor - creates new instance to perform API calls, issue traits/track calls and log information

**Parameters**

-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** configuration object
    -   `config.id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Connector ID - required
    -   `config.secret` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Connector Secret - required
    -   `config.organization` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** Hull organization - required
    -   `config.firehoseUrl` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** The url track/traits calls should be sent
    -   `config.protocol` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** protocol which will be appended to organization url, override for testing only (optional, default `https`)
    -   `config.prefix` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** prefix of Hull REST API - only possible value now (optional, default `/api/v1`)

**Examples**

```javascript
const HullClient = require("hull-client");
const hullClient = new HullClient({
  id: "HULL_ID",
  secret: "HULL_SECRET",
  organization: "HULL_ORGANIZATION_DOMAIN"
});
```

### configuration

Returns the global configuration object.

**Examples**

```javascript
const hullClient = new HullClient({});
shullClient.configuration()
// returns
{
  prefix: "/api/v1",
  domain: "hullapp.io",
  protocol: "https",
  id: "58765f7de3aa14001999",
  secret: "12347asc855041674dc961af50fc1",
  organization: "fa4321.hullapp.io",
  version: "0.13.10"
}
```

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** current `HullClient` configuration parameters

### as

**Parameters**

-   `userClaim`  
-   `additionalClaims`   (optional, default `{}`)

**Meta**

-   **deprecated**: Use `asUser` instead


### asUser

Takes User Claims (link to User Identity docs) and returnes `HullClient` instance scoped to this User.
This makes [#traits](#traits) and [#track](#track) methods available.

**Parameters**

-   `userClaim` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
-   `additionalClaims` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)**  (optional, default `{}`)
    -   `additionalClaims.create` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** marks if the user should be lazily created if not found (optional, default `true`)
    -   `additionalClaims.scopes` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** adds scopes claim to the JWT to impersonate a User with admin rights (optional, default `[]`)
    -   `additionalClaims.active` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** marks the user as _active_ meaning a reduced latency at the expense of scalability. Don't use for high volume updates (optional, default `false`)


-   Throws **[Error](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)** if no valid claims are passed

Returns **[HullClient](#hullclient)** 

### asAccount

Takes Account Claims (link to User Identity docs) and returnes `HullClient` instance scoped to this Account.
This makes [#traits](#traits) method available.

**Parameters**

-   `accountClaim` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 
-   `additionalClaims` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)**  (optional, default `{}`)


-   Throws **[Error](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error)** If no valid claims are passed

Returns **[HullClient](#hullclient)** instance scoped to account claims

## ScopedHullClient

Following methods are available when `HullClient` instance is scoped to user or account.
How to get scoped client? Use `asUser` or `asAccount` methods.

**Examples**

```javascript
const hullClient = new HullClient({ id, secret, organization });
const scopedHullClient = hullClient.asUser({ email: "foo@bar.com "});
scopedHullClient.traits({ new_attribute: "new_value" });
```

### token

Used for [Bring your own users](http://hull.io/docs/users/byou).
Creates a signed string for the user passed in hash. `userHash` needs an `email` field.
[You can then pass this client-side to Hull.js](http://www.hull.io/docs/users/byou) to authenticate users client-side and cross-domain

**Parameters**

-   `claims` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** additionalClaims

**Examples**

```javascript
hullClient.asUser({ email: "xxx@example.com", external_id: "1234" }).token(optionalClaims);
hullClient.asAccount({ domain: "example.com", external_id: "1234" }).token(optionalClaims);
```

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** token

### traits

Saves attributes on the user or account. Only available on User or Account scoped `HullClient` instance (see [#asuser](#asuser) and [#asaccount](#asaccount)).

**Parameters**

-   `traits` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** object with new attributes, it's always flat object, without nested subobjects
-   `context` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)**  (optional, default `{}`)
    -   `context.source` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** optional source prefix, if applied all traits will be prefixed with this string (and `/` character)
    -   `context.sync` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** make the operation synchronous (optional, default `false`)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

### track

Stores events on user. Only available on User scoped `HullClient` instance (see [#asuser](#asuser)).

**Parameters**

-   `event` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** event name
-   `properties` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** additional information about event, this is a one-level JSON object (optional, default `{}`)
-   `context` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** The `context` object lets you define event meta-data. Everything is optional (optional, default `{}`)
    -   `context.source` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Defines a namespace, such as `zendesk`, `mailchimp`, `stripe`
    -   `context.type` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Define a event type, such as `mail`, `ticket`, `payment`
    -   `context.created_at` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Define an event date. defaults to `now()`
    -   `context.event_id` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Define a way to de-duplicate events. If you pass events with the same unique `event_id`, they will overwrite the previous one.
    -   `context.ip` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Define the Event's IP. Set to `null` if you're storing a server call, otherwise, geoIP will locate this event.
    -   `context.referer` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)?** Define the Referer. `null` for server calls.

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

### alias

Issues an `alias` event on user?

**Parameters**

-   `body` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** 

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

### account

Available only for User scoped `HullClient` instance (see [#asuser](#asuser)).
Returns `HullClient` instance scoped to both User and Account, but all traits/track call would be performed on the User, who will be also linked to the Account.

**Parameters**

-   `accountClaim` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** [description] (optional, default `{}`)

Returns **[HullClient](#hullclient)** HullClient scoped to a User and linked to an Account

## Api

Following methods allows to perform api calls again Hull REST API.
Their are available on `HullClient` and scoped HullClient.

### get

Performs a GET HTTP request on selected url of Hull REST API (prefixed with `prefix` param of the constructor)

**Parameters**

-   `url` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)?** 
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)**  (optional, default `{}`)
    -   `options.timeout` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** option controls if the client should retry the request if the client timeout error happens or if there is an error 503 returned serverside - the value of the option is applied for client side error
    -   `options.retry` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** controls the time between timeout or 503 error occurence and the next retry being done

### post

Performs a POST HTTP request on selected url of Hull REST API (prefixed with `prefix` param of the constructor)

**Parameters**

-   `url` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)?** 
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)**  (optional, default `{}`)
    -   `options.timeout` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** option controls if the client should retry the request if the client timeout error happens or if there is an error 503 returned serverside - the value of the option is applied for client side error
    -   `options.retry` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** controls the time between timeout or 503 error occurence and the next retry being done

### put

Performs a PUT HTTP request on selected url of Hull REST API (prefixed with `prefix` param of the constructor)

**Parameters**

-   `url` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)?** 
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)**  (optional, default `{}`)
    -   `options.timeout` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** option controls if the client should retry the request if the client timeout error happens or if there is an error 503 returned serverside - the value of the option is applied for client side error
    -   `options.retry` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** controls the time between timeout or 503 error occurence and the next retry being done

### del

Performs a DELETE HTTP request on selected url of Hull REST API (prefixed with `prefix` param of the constructor)

**Parameters**

-   `url` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `params` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)?** 
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)**  (optional, default `{}`)
    -   `options.timeout` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** option controls if the client should retry the request if the client timeout error happens or if there is an error 503 returned serverside - the value of the option is applied for client side error
    -   `options.retry` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)?** controls the time between timeout or 503 error occurence and the next retry being done

## Utils

Following methods are helper utilities. They are available under `utils` property

### groupTraits

**Meta**

-   **deprecated**: use `utils.traits.group` instead


### properties.get

Gets and returns all existing properties in the organization along with their metadata

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)>** 

### settings.update

Updates `private_settings` merging them with existing ones before.

Note: this method will trigger `hullClient.put` and will result in `ship:update` notify event coming from Hull platform - possible loop condition.

**Parameters**

-   `newSettings` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** settings to update

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** 

### traits.group

The Hull API returns traits in a "flat" format, with '/' delimiters in the key.
This method can be used to group those traits into subobjects:

**Parameters**

-   `user` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** flat object

**Examples**

````javascript
    hullClient.utils.traits.group({
      email: "romain@user",
      name: "name",
      "traits_coconut_name": "coconut",
      "traits_coconut_size": "large",
      "traits_cb/twitter_bio": "parisian",
      "traits_cb/twitter_name": "parisian",
      "traits_group/name": "groupname",
      "traits_zendesk/open_tickets": 18
    });

    // returns
    {
      "email": "romain@user",
      "name": "name",
      "traits": {
        "coconut_name": "coconut",
        "coconut_size": "large"
      },
      "cb": {
        "twitter_bio": "parisian",
        "twitter_name": "parisian"
      },
      "group": {
        "name": "groupname"
      },
      "zendesk": {
        "open_tickets": 18
      }
    };
    ```
````

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** nested object
